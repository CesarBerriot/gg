cmake_minimum_required(VERSION 3.31)
project(executable)

set(CMAKE_CXX_STANDARD 20)
set(BUILD_SHARED_LIBS OFF)

block()
  include(FetchContent)
  FetchContent_Declare(fetch_github_content GIT_REPOSITORY https://github.com/CesarBerriot/fetch_github_content.git GIT_TAG 1.0.0)
  FetchContent_MakeAvailable(fetch_github_content)
  include(${fetch_github_content_SOURCE_DIR}/fetch_github_content.cmake)

  fetch_github_content(
    discover_sources CesarBerriot 1.1.0 INCLUDE_DEFAULT
    dial CesarBerriot 2.2.0
    #hard_assert CesarBerriot 1.2.3
    #make_string CesarBerriot 2.2.3
    #cxxhttp CesarBerriot 1.0.0 INCLUDE_DEFAULT
    #json nlohmann v3.12.0
  )
endblock()

add_executable(executable)
discover_sources(executable)
dial_link_target(executable)
#cxxhttp_setup_target(executable)
#target_include_directories(executable PRIVATE source)
target_compile_definitions(
  executable PRIVATE
  MODULE_NAME="Executable"
)
target_link_libraries(
  executable PRIVATE
  #hard_assert
  #make_string
  #nlohmann_json
)
if(MINGW)
  target_link_options(executable PRIVATE -static)
  if(NOT CMAKE_BUILD_TYPE STREQUAL "Debug")
    target_link_options(executable PRIVATE -s)
  endif()
endif()